<div class="dashboard-container">
  <h1>Dashboard</h1>

  <mat-progress-spinner *ngIf="loading" mode="indeterminate" diameter="50"></mat-progress-spinner>

  <div *ngIf="!loading" class="stats-grid">
    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-icon" style="background-color: #4caf50;">
          <mat-icon>today</mat-icon>
        </div>
        <div class="stat-info">
          <h3>Today's Sales</h3>
          <p class="stat-value">₹{{ stats.todaySales?.revenue | number:'1.2-2' }}</p>
          <p class="stat-label">{{ stats.todaySales?.count }} bills</p>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-icon" style="background-color: #2196f3;">
          <mat-icon>calendar_month</mat-icon>
        </div>
        <div class="stat-info">
          <h3>Monthly Sales</h3>
          <p class="stat-value">₹{{ stats.monthlySales?.revenue | number:'1.2-2' }}</p>
          <p class="stat-label">{{ stats.monthlySales?.count }} bills</p>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-icon" style="background-color: #ff9800;">
          <mat-icon>inventory</mat-icon>
        </div>
        <div class="stat-info">
          <h3>Inventory Value</h3>
          <p class="stat-value">₹{{ stats.inventoryValue | number:'1.2-2' }}</p>
          <p class="stat-label">{{ stats.totalProducts }} products</p>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card">
      <mat-card-content>
        <div class="stat-icon" style="background-color: #f44336;">
          <mat-icon>warning</mat-icon>
        </div>
        <div class="stat-info">
          <h3>Low Stock</h3>
          <p class="stat-value">{{ stats.lowStockCount }}</p>
          <p class="stat-label">products need restocking</p>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <div *ngIf="!loading && stats.dailySales" class="chart-container mt-20">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Sales Trend (Last 7 Days)</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <canvas baseChart
          [type]="dailySalesChartType"
          [data]="dailySalesChartData"
          [options]="dailySalesChartOptions">
        </canvas>
      </mat-card-content>
    </mat-card>
  </div>
</div>

